```
╔════════════════════════════════════════════════════════════════════════════════╗
║                    OS KERNEL CLASS ARCHITECTURE DIAGRAM                        ║
╚════════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              OSKernel (Main)                                    │
│  ┌──────────────────────────────────────────────────────────────────────────┐  │
│  │ - scheduler: Scheduler                                                   │  │
│  │ - dispatcher: Dispatcher                                                 │  │
│  │ - processes: List<Process>                                               │  │
│  │ - processThreads: Map<Integer, List<Thread>>                             │  │
│  │ - simulationTime: int                                                    │  │
│  ├──────────────────────────────────────────────────────────────────────────┤  │
│  │ + createProcess(String, int, int): Process                               │  │
│  │ + createThread(int, String, int, ThreadPriority): Thread                 │  │
│  │ + runKernelCycle(): void                                                 │  │
│  │ + runSimulation(int): void                                               │  │
│  │ + printSimulationResults(): void                                         │  │
│  │ + getScheduler(): Scheduler                                              │  │
│  │ + getDispatcher(): Dispatcher                                            │  │
│  └──────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────┬──────────────────────────────────┘
                                               │
                          ┌────────────────────┼────────────────────┐
                          │                    │                    │
        ┌─────────────────▼──────────────┐    │    ┌────────────────▼──────────────┐
        │       Scheduler                │    │    │       Dispatcher              │
        ├────────────────────────────────┤    │    ├──────────────────────────────┤
        │ - algorithm: SchedulingAlg.    │    │    │ - scheduler: Scheduler       │
        │ - readyQueue: Queue<Process>   │    │    │ - currentRunningProcess:     │
        │ - priorityQueue: PriorityQueue │    │    │   Process                    │
        │ - allProcesses: List<Process>  │    │    │ - timeSliceCounter: int      │
        │ - currentTime: int             │    │    │ - cpuTimeUsed: int           │
        │ - timeQuantum: int             │    │    │ - executionHistory: List     │
        ├────────────────────────────────┤    │    ├──────────────────────────────┤
        │ + addProcess(Process): void    │    │    │ + dispatch(): void           │
        │ + getNextProcess(): Process    │    │    │ + executeTimeUnit(): void    │
        │ + requeueProcess(Process): void│    │    │ + runCycle(): void           │
        │ + hasReadyProcesses(): boolean │    │    │ + isCPUIdle(): boolean       │
        │ + getReadyQueueSize(): int     │    │    │ + getCPUTimeUsed(): int      │
        │ + getProcessesByState(State)   │    │    │ + getExecutionHistory()      │
        │   : List<Process>              │    │    │   : List<ProcessExecution>   │
        │ + getAlgorithm(): SchedulingAlg│    │    │ + printStatistics(): void    │
        └────────────────────────────────┘    │    └──────────────────────────────┘
                                              │
                                ┌─────────────┼─────────────┐
                                │             │             │
                ┌───────────────▼──────────┐  │  ┌──────────▼──────────────┐
                │      Process             │  │  │       Thread           │
                ├────────────────────────────┤  │  ├────────────────────────┤
                │ - PID: int (static auto) │  │  │ - threadID: int (auto) │
                │ - processName: String    │  │  │ - parentPID: int       │
                │ - priority: int (1-10)   │  │  │ - threadName: String   │
                │ - state: ProcessState    │  │  │ - state: ProcessState  │
                │ - totalBurstTime: int    │  │  │ - priority:ThreadPrio. │
                │ - remainingBurstTime: int│  │  │ - executionTime: int   │
                │ - startTime: int         │  │  │ - remainingTime: int   │
                │ - endTime: int           │  │  ├────────────────────────┤
                │ - waitingTime: int       │  │  │ + getThreadID(): int   │
                │ - turnaroundTime: int    │  │  │ + getParentPID(): int  │
                ├────────────────────────────┤  │  │ + getState(): State    │
                │ + getPID(): int          │  │  │ + setState(State):void │
                │ + getProcessName(): String│  │  │ + getRemainingTime():  │
                │ + getPriority(): int     │  │  │   int                  │
                │ + setState(State): void  │  │  │ + isComplete():boolean │
                │ + getState(): State      │  │  │ + reduceRemainingTime()│
                │ + getRemainingBurstTime()│  │  │   (int): void          │
                │ + isComplete(): boolean  │  │  └────────────────────────┘
                │ + reduceRemainingTime()  │  │
                └────────────────────────────┘  │
                                                │
                                    ┌───────────▼─────────┐
                                    │  ProcessState Enum  │
                                    ├─────────────────────┤
                                    │ NEW                 │
                                    │ READY               │
                                    │ RUNNING             │
                                    │ BLOCKED             │
                                    │ TERMINATED          │
                                    └─────────────────────┘


SCHEDULING ALGORITHMS SUPPORTED:
═════════════════════════════════════════════════════════════════════════════════

  ┌────────────────────────────────────────────────────────────────────────────┐
  │ 1. ROUND_ROBIN - Fair time-slice distribution                             │
  │    ├─ Time Quantum: 3 units                                                │
  │    ├─ Ready Queue: FIFO (First-In-First-Out)                              │
  │    └─ Preemption: On time quantum expiration                               │
  └────────────────────────────────────────────────────────────────────────────┘

  ┌────────────────────────────────────────────────────────────────────────────┐
  │ 2. PRIORITY_BASED - Process execution by priority level                    │
  │    ├─ Ready Queue: PriorityQueue (Max-Heap)                                │
  │    ├─ Priority Range: 1-10 (higher = more important)                       │
  │    └─ Preemption: On time quantum expiration                               │
  └────────────────────────────────────────────────────────────────────────────┘

  ┌────────────────────────────────────────────────────────────────────────────┐
  │ 3. MIXED - Priority with Round-Robin fairness                              │
  │    ├─ Primary: Highest priority first                                      │
  │    ├─ Secondary: Time quantum fairness within priority level               │
  │    └─ Prevents priority inversion                                          │
  └────────────────────────────────────────────────────────────────────────────┘


PROCESS STATE TRANSITIONS:
═════════════════════════════════════════════════════════════════════════════════

                    ┌──────────┐
                    │   NEW    │ (Process created)
                    └────┬─────┘
                         │ admitted to ready queue
                    ┌────▼─────┐
           ┌────────│  READY   │◄─────────┐
           │        └────┬─────┘          │
           │             │ selected by    │ time quantum
           │             │ scheduler      │ expires
           │        ┌────▼───────┐        │
           │        │  RUNNING   ├────────┘
           │        └────┬───────┘
           │             │ waiting for
           │             │ I/O
           │        ┌────▼────────┐
           │        │  BLOCKED    │
           │        └────┬────────┘
           │             │ I/O complete
           └─────────────┘
                         │ completion
                    ┌────▼──────────┐
                    │  TERMINATED  │
                    └──────────────┘


DISPATCHER OPERATIONS:
═════════════════════════════════════════════════════════════════════════════════

    ╔═══════════════════════════════════════════════════════════════╗
    ║  1. dispatch()  - Select next process from ready queue       ║
    ║     • Check if current process time quantum expired          ║
    ║     • Save current process context if preempted              ║
    ║     • Select next highest-priority ready process             ║
    ║     • Transition process to RUNNING state                    ║
    ╠═══════════════════════════════════════════════════════════════╣
    ║  2. executeTimeUnit() - Execute for 1 time unit              ║
    ║     • Reduce remaining burst time by 1                       ║
    ║     • Increment time slice counter                           ║
    ║     • Update CPU usage metrics                               ║
    ╠═══════════════════════════════════════════════════════════════╣
    ║  3. runCycle() - Complete scheduler/dispatcher cycle          ║
    ║     • Call dispatch()                                         ║
    ║     • Call executeTimeUnit()                                  ║
    ║     • Update statistics                                       ║
    ╚═══════════════════════════════════════════════════════════════╝


MULTI-THREADING MODEL:
═════════════════════════════════════════════════════════════════════════════════

    ┌──────────────────────────────────────────────────────────────┐
    │  SchedulerThread  (Java Thread)                              │
    │  ├─ Runs indefinitely monitoring ready queue                 │
    │  ├─ Logs queue statistics every cycle                        │
    │  ├─ Tracks process state changes                             │
    │  └─ Synchronized with lockObject to prevent race conditions  │
    └──────────────────────────────────────────────────────────────┘
                               │
                         Shared Lock
                         (lockObject)
                               │
    ┌──────────────────────────────────────────────────────────────┐
    │  DispatcherThread  (Java Thread)                             │
    │  ├─ Executes kernel cycles (dispatch + execute)              │
    │  ├─ Manages CPU time allocation                              │
    │  ├─ Handles context switching                                │
    │  └─ Maintains execution history                              │
    └──────────────────────────────────────────────────────────────┘


EXECUTION FLOW:
═════════════════════════════════════════════════════════════════════════════════

  main()
   │
   ├─► Create OSKernel with Priority-Based scheduling
   │
   ├─► Create 4 processes with different priorities
   │   • Process-C: Priority 9 (highest)
   │   • Process-A: Priority 8
   │   • Process-B: Priority 5
   │   • Process-D: Priority 3 (lowest)
   │
   ├─► Create threads within processes
   │
   ├─► Start SchedulerThread and DispatcherThread
   │   │
   │   ├─► Scheduler: Monitor & log queue state (50 iterations)
   │   │
   │   ├─► Dispatcher: Execute cycles (50 iterations)
   │   │   │
   │   │   └─► For each cycle:
   │   │       1. dispatch() - Select next process (or switch on preemption)
   │   │       2. executeTimeUnit() - Run for 1 unit
   │   │       3. Synchronize access via lockObject
   │   │
   │   └─► Both threads sleep between cycles to simulate real scheduling
   │
   └─► Join both threads & print final statistics


DATA STRUCTURES:
═════════════════════════════════════════════════════════════════════════════════

  Ready Queue (Round-Robin):
    ┌──────┬──────┬──────┬──────┐
    │ Proc │ Proc │ Proc │ Proc │  ← FIFO order
    └──────┴──────┴──────┴──────┘

  Priority Queue (Priority-Based):
    ┌─────────┐
    │  Proc-C │  (Priority 9)
    ├─────────┤
    │  Proc-A │  (Priority 8)
    ├─────────┤
    │  Proc-B │  (Priority 5)
    ├─────────┤
    │  Proc-D │  (Priority 3)
    └─────────┘  ← Max-Heap structure

```
